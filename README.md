# Contact Search App

## About The Project

It's a movie search application that indexes data from the csv-generator to a local deployment of Elasticsearch made using Docker containers, all orchestrated by a PHP server.

## Getting Started

Follow these steps to get the project locally on your machine.

### Prerequisites

- Docker
- Docker compose
- ExtendsClass API KEY

### Installation

1. Clone the repo by running (after this line all command must be launched for the cloned directory):  

   ```sh
   git clone https://github.com/semhoun/contacts-search.git
   ```

2. Rename the `.env.example` file to `.env` and fill your settings (specify the stack version you want to work on, the `ELASTIC_PASSWORD` , `EXTENDCLASS_API_KEY` and `KIBANA_PASSWORD`)

4. Next, open a terminal and run:

   ```sh
   docker compose up -d
   ```

   It may take some time depending on your internet connection as it will pull Elasticsearch and Kibana images from the Docker Hub.

5. Once the containers are launched, take care of the backend first. Open a new terminal and run:

   ```sh
   docker compose run --rm backend composer install
   ```

6. Next, you'll need to copy the certificates generated by the setup service when you launched `docker compose` in the backend folder, to ensure a secure connexion between your application and Elasticsearch (this step is crucial). Run the following command in a terminal:

   ```sh
   docker compose cp esnode1 esnode1:/usr/share/elasticsearch/config/certs/ca/ca.crt backend/ca.crt
   ```

7. Now that every thing is setup, open a new tab in your browser an go to http://localhost:5602/create_index. The elastic search index will be created.

8. Now that every thing is setup, open a new tab in your browser an go to http://localhost:5602/add_contacts. The data will be collected from cvs, and added to elasticsearch.

## Application

http://localhost:5603/
